{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/misha/Desktop/miauth/pages/me.jsx\";\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport cookie from 'cookie';\nexport default function Me({\n  user\n}) {\n  const router = useRouter();\n\n  if (!user) {\n    router.push('/login');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 10\n  }, this);\n}\nexport const getServerSideProps = async ctx => {\n  // const cookie = ctx.req?.headers.cookie\n  const authToken = cookie.parse(ctx.req.headers.cookie);\n  const verifyed = jsonwebtoken.verify(req.cookies.auth, this.cookieSecret);\n  req.userId = verifyed.userId;\n  const user = await database.findById({\n    Model: User,\n    id: verifyed.userId,\n    select: '-password'\n  }); // if (res.status === 401) {\n  //   if (ctx.res) {\n  //     ctx.res.setHeader('location', '/login')\n  //     ctx.res.statusCode = 302\n  //     return { props: {} }\n  //   }\n  // }\n\n  return {\n    props: {\n      user: ''\n    }\n  };\n};","map":{"version":3,"sources":["/Users/misha/Desktop/miauth/pages/me.jsx"],"names":["React","useRouter","cookie","Me","user","router","push","getServerSideProps","ctx","authToken","parse","req","headers","verifyed","jsonwebtoken","verify","cookies","auth","cookieSecret","userId","database","findById","Model","User","id","select","props"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,eAAe,SAASC,EAAT,CAAY;AAAEC,EAAAA;AAAF,CAAZ,EAAsB;AACnC,QAAMC,MAAM,GAAGJ,SAAS,EAAxB;;AACA,MAAI,CAACG,IAAL,EAAW;AACTC,IAAAA,MAAM,CAACC,IAAP,CAAY,QAAZ;AACD;;AACD,sBAAO;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AAED,OAAO,MAAMC,kBAAkB,GAAG,MAAMC,GAAN,IAAa;AAC7C;AACA,QAAMC,SAAS,GAAGP,MAAM,CAACQ,KAAP,CAAaF,GAAG,CAACG,GAAJ,CAAQC,OAAR,CAAgBV,MAA7B,CAAlB;AACA,QAAMW,QAAQ,GAAGC,YAAY,CAACC,MAAb,CAAoBJ,GAAG,CAACK,OAAJ,CAAYC,IAAhC,EAAsC,KAAKC,YAA3C,CAAjB;AACAP,EAAAA,GAAG,CAACQ,MAAJ,GAAaN,QAAQ,CAACM,MAAtB;AACA,QAAMf,IAAI,GAAG,MAAMgB,QAAQ,CAACC,QAAT,CAAkB;AACnCC,IAAAA,KAAK,EAAEC,IAD4B;AAEnCC,IAAAA,EAAE,EAAEX,QAAQ,CAACM,MAFsB;AAGnCM,IAAAA,MAAM,EAAE;AAH2B,GAAlB,CAAnB,CAL6C,CAW7C;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAO;AAAEC,IAAAA,KAAK,EAAE;AAAEtB,MAAAA,IAAI,EAAE;AAAR;AAAT,GAAP;AACD,CAnBM","sourcesContent":["import React from 'react'\nimport { useRouter } from 'next/router'\nimport cookie from 'cookie'\n\nexport default function Me({ user }) {\n  const router = useRouter()\n  if (!user) {\n    router.push('/login')\n  }\n  return <div></div>\n}\n\nexport const getServerSideProps = async ctx => {\n  // const cookie = ctx.req?.headers.cookie\n  const authToken = cookie.parse(ctx.req.headers.cookie)\n  const verifyed = jsonwebtoken.verify(req.cookies.auth, this.cookieSecret)\n  req.userId = verifyed.userId\n  const user = await database.findById({\n    Model: User,\n    id: verifyed.userId,\n    select: '-password',\n  })\n\n  // if (res.status === 401) {\n  //   if (ctx.res) {\n  //     ctx.res.setHeader('location', '/login')\n  //     ctx.res.statusCode = 302\n  //     return { props: {} }\n  //   }\n  // }\n  return { props: { user: '' } }\n}\n"]},"metadata":{},"sourceType":"module"}